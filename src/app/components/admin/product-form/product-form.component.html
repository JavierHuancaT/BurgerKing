<div class="d-flex justify-content-between align-items-center mb-3">
  <h5 class="m-0" style="color:var(--bk-brown)">
    {{ editId ? 'Editar producto' : 'Nuevo producto' }}
  </h5>
  <a routerLink="../products">Volver a la lista</a>
</div>

<form [formGroup]="form" (ngSubmit)="save()" class="row g-3">
  <div class="col-md-6">
    <label class="form-label">Nombre</label>
    <input type="text" class="form-control" formControlName="name" placeholder="Ej: Whopper"/>
  </div>

  <div class="col-md-3">
    <label class="form-label">Precio base</label>
    <input type="number" class="form-control" formControlName="basePrice" min="0"/>
  </div>

  <div class="col-md-3">
    <label class="form-label">Stock</label>
    <input type="number" class="form-control" formControlName="stock" min="0"/>
  </div>

  <div class="col-md-8">
    <label class="form-label">Descripción</label>
    <input type="text" class="form-control" formControlName="descripcion"/>
  </div>

  <div class="col-md-4">
    <label class="form-label">Categoría</label>
    <select class="form-select" formControlName="categoria">
      <option *ngFor="let c of categorias" [value]="c">{{ c }}</option>
    </select>
  </div>

  <!-- Gestion de Personalizaciones -->
  <div class="col-12">
    <hr>
    <h6 class="mb-3" style="color:var(--bk-brown)">Gestionar personalizaciones</h6>
    <app-gestion-personalizacion-administrador [form]="form"></app-gestion-personalizacion-administrador>
  </div>

  <!-- Imagen -->
  <div class="col-12">
    <label class="form-label">Imagen (opcional)</label>
    <input type="file" class="form-control" accept="image/*" (change)="onFileSelected($event)"/>

    <div class="mt-2 d-flex align-items-center gap-3" *ngIf="previewData">
      <img [src]="previewData" alt="preview" class="border rounded"
           style="width:96px;height:96px;object-fit:cover;">
      <button type="button" class="btn btn-sm btn-outline-secondary" (click)="quitarImagen()">
        Quitar imagen
      </button>
    </div>
  </div>

  <div class="col-12 d-flex gap-2">
    <button class="btn btn-bk-primary" type="submit">
      {{ editId ? 'Guardar cambios' : 'Guardar producto' }}
    </button>
    <a class="btn btn-bk-ghost" routerLink="../products">Cancelar</a>
  </div>
</form>
