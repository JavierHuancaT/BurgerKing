<header class="custom-header">

  <!-- Navegacion principal -->
  <nav class="nav-links">
    <a class="nav-item" routerLink="/catalogo">Catálogo</a>
    <a class="nav-item" routerLink="/restaurantes">Restaurantes</a>
    <a class="nav-item" routerLink="/promociones">Promociones</a>
  </nav>

  <!-- Logo -->
  <div class="logo-container">
    <a routerLink="/">
      <img src="assets/logo.png" alt="Logo de Burger King" class="logo-img">
    </a>
  </div>

  <!-- Contenedor de acciones de usuario y carrito -->
  <div class="user-actions-wrapper">
    <!-- Acciones del usuario (nombre, logout, admin o botones registro/login) -->
    <div class="user-actions" *ngIf="currentUser; else notLogged">
      <!-- CLIENTE -->
      <ng-container *ngIf="currentUser.role === 'Client' || !currentUser.role">
        <span class="user-name">Hola, {{ currentUser.name }}</span>
        <a class="btn-profile" routerLink="/perfil">Mi Perfil</a>
        <button class="btn-logout" (click)="logout()">Cerrar sesión</button>
      </ng-container>

      <!-- ADMIN -->
      <ng-container *ngIf="currentUser.role === 'Admin'">
        <span class="user-name">Hola, {{ currentUser.name }}</span>
        <button class="btn-admin" routerLink="/admin/products">Menú Admin</button>
        <button class="btn-logout" (click)="logout()">Cerrar sesión</button>
      </ng-container>
    </div>

    <!-- NO LOGUEADO -->
    <ng-template #notLogged>
      <div class="user-actions">
        <button class="btn-register" routerLink="/auth/register">Registrarse</button>
        <button class="btn-login" routerLink="/auth/login">Iniciar sesión</button>
      </div>
    </ng-template>

    <!-- Carrito (siempre visible con total) -->
    <div
      class="cart-fixed"
      (click)="toggleCarrito()"
      title="Ver carrito">
      <img src="assets/carrito.png" alt="Logo de Carrito" class="cart-img" />
      <span class="cart-total">{{ totalCarrito === 0 ? '$0' : (totalCarrito | currency:'CLP':'symbol':'1.0-0') }}</span>
    </div>
  </div>
</header>
